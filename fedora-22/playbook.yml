---

- hosts: localhost
  sudo: yes
  roles:
    - role: provision

      provision_repositories:
        - "https://repos.fedorapeople.org/repos/spot/chromium/fedora-chromium-stable.repo"
        - "http://negativo17.org/repos/fedora-spotify.repo"

      provision_enable_rpmfusion: yes

      provision_packages:
        - openssh-server

        # office
        - dropbox
        - thunderbird
        - libreoffice
        - cups

        # virtualization
        - vagrant
        - libvirt
        - libvirt-devel
        - virt-manager
        - vagrant-libvirt
        - vagrant-libvirt-doc
        - vagrant-lxc
        - vagrant-lxc-doc

        # xmonad
        - xmonad
        - xmonad-mate
        - ghc-xmonad-devel
        - ghc-xmonad-contrib
        - ghc-xmonad-contrib-devel

      provision_services:
        - name: libvirtd
        - name: cups
        - name: sshd
        - name: firewalld

      provision_users:
        - name: badi
          groups:
            - badi
            - wheel
            - libvirt

      provision_kernel_modules:
        - name: kvm-intel
          parameters:
            - nested=y
          state: reloaded

      provision_secure_sshd: yes

      provision_yubikey: yes
